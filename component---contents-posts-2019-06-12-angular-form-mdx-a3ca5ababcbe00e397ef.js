"use strict";(self.webpackChunknew_gatsby_blog=self.webpackChunknew_gatsby_blog||[]).push([[8326],{7739:function(e,n,t){t.r(n);var a=t(1151),l=t(7294);function r(e){const n=Object.assign({span:"span",ul:"ul",li:"li",h2:"h2",p:"p",pre:"pre",code:"code"},(0,a.ah)(),e.components);return l.createElement(l.Fragment,null,l.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; "\n    >\n      <a\n    class="gatsby-resp-image-link"\n    href="/static/36ee213c9d1d85a0daeb83293d57ebec/599ea/form.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n    <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 21.5%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAwklEQVR42oWOy27CMBBF8//fREXFqps+AqJVKQgEqHWIjevYCcFxcjqw6KZIHelodKSZq5up7RZTlhSHA9oYnHOEuib1PZfpZf/HMAzEGLHWki1WC9TnnqOWwFLRBMep9nxbc/UhRXlKpNTTdd1NUkq0bYvWhuzhecnje8F845itLfnKkC+FD82LMBXf7DVKfVFVFd77P4QQpICVG0U2ftoxnjlG+ZG7qeV+7pm8BiZvF2rxisKeiOf2t80tmqa5Bv4Afb4vrzPS2YcAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="img1"\n        title=""\n        src="/static/36ee213c9d1d85a0daeb83293d57ebec/5a190/form.png"\n        srcset="/static/36ee213c9d1d85a0daeb83293d57ebec/772e8/form.png 200w,\n/static/36ee213c9d1d85a0daeb83293d57ebec/e17e5/form.png 400w,\n/static/36ee213c9d1d85a0daeb83293d57ebec/5a190/form.png 800w,\n/static/36ee213c9d1d85a0daeb83293d57ebec/c1b63/form.png 1200w,\n/static/36ee213c9d1d85a0daeb83293d57ebec/29007/form.png 1600w,\n/static/36ee213c9d1d85a0daeb83293d57ebec/599ea/form.png 1926w"\n        sizes="(max-width: 800px) 100vw, 800px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n  </a>\n    </span>'}}),"\n",l.createElement(n.ul,null,"\n",l.createElement(n.li,null,"목차"),"\n"),"\n",l.createElement(n.h2,null,"문제"),"\n",l.createElement(n.p,null,"AngularJS를 사용할 때 selectbox를 form binding해서 사용하게 된다. 이 때 분명 html의 selected 속성을 사용하였는데, 기본값을 설정할 수 없는 문제가 발생하였다."),"\n",l.createElement(n.h2,null,"해결"),"\n",l.createElement(n.p,null,"모든 option의 value와 model, 렌더링되는 시점을 확인해 보아도 문제가 없었다. 분명히 selected가 설정되어야 했다."),"\n",l.createElement(n.pre,null,l.createElement(n.code,{className:"language-Angular"},'{% raw %}\n<div class="form-select-area">\n  <label class="form-label" for="gender">성별</label>\n  <select id="gender" name="gender" class="form-select"\n          required\n          [(ngModel)]="data.sex"\n          #sex="ngModel">\n    <option value="" selected disabled>성별을 선택하세요</option>\n    <option *ngFor="let sex of [1, 2]" [ngValue]="sex">\n      {{sex === 1 ? \'남자\' : \'여자\'}}\n    </option>\n  </select>\n  <p class="form-msg error"\n      [hidden]="isValidForm(f, sex)">\n    This field is required\n  </p>\n</div>\n{% endraw %}\n')),"\n",l.createElement(n.p,null,'위에서 option을 하나 추가해서 그것을 기본 선택자로 해두고 그것은 선택할 수 없게 했다. 그리고 value에 "" 빈 string을 입력해 두었다. 하지만 여기서 문제를 발견했다. 내가 value를 입력했지만 이 값이 binding된 ',l.createElement(n.code,null,'[(ngModel)]="data.sex"')," 값과 달랐기 때문이었다. 두 값이 다른 경우 어떠한 경우에도 selected가 설정되지 않았다. 심지어\n수동으로 selected 설정을 해도 전혀 작동하지 않았다 !!"),"\n",l.createElement(n.p,null,"참고로 data에 해당하는 model이다."),"\n",l.createElement(n.pre,null,l.createElement(n.code,null,"export class UserUpdateUI {\n  constructor(\n    public name: string = '',\n    public email: string = '',\n    public phone: string = '',\n    public sex: number = 0,\n    public password: string = '',\n    public confirmPassword: string = ''\n  ) {\n  }\n}\n")),"\n",l.createElement(n.h2,null,"결론"),"\n",l.createElement(n.p,null,"option의 value를 null 이든 undefined이든 model의 초기값과 일치시켜 주어야 한다. model의 변수가 number인 경우도 특히 유의해야 하는데 undefined라는 value로 초기화되어 있을 가능성이 크다. AngularJS 폼을 selected 하려거든 항상 초기값을 조심하자."))}n.default=function(e){void 0===e&&(e={});const{wrapper:n}=Object.assign({},(0,a.ah)(),e.components);return n?l.createElement(n,e,l.createElement(r,e)):r(e)}},1151:function(e,n,t){t.d(n,{Zo:function(){return c},ah:function(){return r}});var a=t(7294);const l=a.createContext({});function r(e){const n=a.useContext(l);return a.useMemo((()=>"function"==typeof e?e(n):{...n,...e}),[n,e])}const s={};function c({components:e,children:n,disableParentContext:t}){let c;return c=t?"function"==typeof e?e({}):e||s:r(e),a.createElement(l.Provider,{value:c},n)}}}]);
//# sourceMappingURL=component---contents-posts-2019-06-12-angular-form-mdx-a3ca5ababcbe00e397ef.js.map